Staff:
  inheritance:
    type: concrete
    extends: Person
  relations:
    Productions:
      class: Production
      refClass: ProductionStaff
      local: staff_id
      foreign: production_id
    Roles:
      class: Role
      refClass: ProductionStaff
      local: staff_id
      foreign: role_id

ProductionStaff:
  columns:
    production_id:
      type: integer(20)
      notnull: true
    role_id:
      type: integer(20)
      notnull: true
    staff_id:
      type: integer(20)
      notnull: true
  indexes:
    production_id_role_id:
      fields:
        - production_id
        - role_id
      type: unique
  relations:
    Production:
      local: production_id
      foreign: id
    Role:
      local: role_id
      foreign: id
    Staff:
      local: staff_id
      foreign: id

Role:
  columns:
    name:
      type: string(255)
      unique: true
      notnull: true
    department_id:
      type: integer(20)
      notnull: true
  relations:
    Department:
      local: department_id
      foreign: id
      foreignAlias: Roles
    Staff:
      refClass: ProductionStaff
      local: role_id
      foreign: staff_id

Department:
  columns:
    name:
      type: string(255)
      notnull: true